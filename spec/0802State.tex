\section{Состояние}\label{PRG.State}

Состояние автомата представляет собой слово~$S\in\{0,1\}^{1536}$. 

Оно сопровождается следующими параметрами:
\begin{itemize}
\item
$\ell\in\{128,192,256\}$~--- уровень стойкости;
\item
$d\in\{1,2\}$~--- емкость;
\item
$r\in\{1536-2d\ell,1536-\ell-d\ell/2\}$~--- длина буфера (см. далее);
\item
$pos\in\{0,1,\ldots,r-1\}$~--- текущее смещение в буфере.
\end{itemize}

Эти параметры устанавливаются или используются в командах, 
хотя и не указываются в качестве входных и выходных данных.
%
Параметры $\ell$ и $d$ устанавливаются при инициализации автомата и после этого 
не меняются.

Состояние~$S$ разбивается на 2 части: 
\begin{enumerate}
\item
Буфер~$S[\dots r)$.
В эту часть записываются блоки загружаемых данных и по ней определяются 
блоки выгружаемых.
\item
Память~$S[r\dots)$.
Биты памяти никогда не выгружаются из состояния и меняются только путем
применения sponge-функции к предыдущему состоянию.
%
Бит $S[r]$ имеет особый статус: его дополнительно 
инвертирует команда \algname{commit},
фиксируя завершение выполнения предыдущей команды.
\end{enumerate}

